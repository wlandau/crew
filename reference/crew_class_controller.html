<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Controller class — crew_class_controller • crew</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Controller class — crew_class_controller"><meta name="description" content="R6 class for controllers."><meta property="og:description" content="R6 class for controllers."><meta property="og:image" content="https://wlandau.github.io/crew/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">crew</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1.9005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How to use `crew`</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to crew</a></li>
    <li><a class="dropdown-item" href="../articles/groups.html">Controller groups</a></li>
    <li><a class="dropdown-item" href="../articles/logging.html">Logging</a></li>
    <li><a class="dropdown-item" href="../articles/shiny.html">Asynchronous Shiny apps</a></li>
    <li><a class="dropdown-item" href="../articles/promises.html">Integration with promises</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Technical details</h6></li>
    <li><a class="dropdown-item" href="../articles/plugins.html">Launcher plugins</a></li>
    <li><a class="dropdown-item" href="../articles/risks.html">Known risks of crew</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wlandau/crew/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Controller class</h1>
      <small class="dont-index">Source: <a href="https://github.com/wlandau/crew/blob/main/R/crew_controller.R" class="external-link"><code>R/crew_controller.R</code></a></small>
      <div class="d-none name"><code>crew_class_controller.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>R6</code> class for controllers.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other controller:
<code><a href="crew_controller.html">crew_controller</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>client</code></dt>
<dd><p>Client object.</p></dd>


<dt><code>launcher</code></dt>
<dd><p>Launcher object.</p></dd>


<dt><code>tasks</code></dt>
<dd><p>A list of <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code> task objects.
The list of tasks is dynamically generated from an internal,
dictionary, so it is not as fast as a simple lookup.</p></dd>


<dt><code>reset_globals</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.
since the controller was started.</p></dd>


<dt><code>reset_packages</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.
since the controller was started.</p></dd>


<dt><code>reset_options</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.
since the controller was started.</p></dd>


<dt><code>garbage_collection</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.
since the controller was started.</p></dd>


<dt><code>crashes_max</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>backup</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>error</code></dt>
<dd><p>Tibble of task results (with one result per row)
from the last call to <code>map(error = "stop)</code>.</p></dd>


<dt><code>loop</code></dt>
<dd><p><code>later</code> loop if asynchronous auto-scaling is running,
<code>NULL</code> otherwise.</p></dd>


<dt><code>queue_resolved</code></dt>
<dd><p>Queue of resolved tasks.</p></dd>


<dt><code>queue_backlog</code></dt>
<dd><p>Queue of explicitly backlogged tasks.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-crew_class_controller-new"><code>crew_class_controller$new()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-validate"><code>crew_class_controller$validate()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-size"><code>crew_class_controller$size()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-empty"><code>crew_class_controller$empty()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-nonempty"><code>crew_class_controller$nonempty()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-resolved"><code>crew_class_controller$resolved()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-unresolved"><code>crew_class_controller$unresolved()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-saturated"><code>crew_class_controller$saturated()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-start"><code>crew_class_controller$start()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-started"><code>crew_class_controller$started()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-launch"><code>crew_class_controller$launch()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-scale"><code>crew_class_controller$scale()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-autoscale"><code>crew_class_controller$autoscale()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-descale"><code>crew_class_controller$descale()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-crashes"><code>crew_class_controller$crashes()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-push"><code>crew_class_controller$push()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-walk"><code>crew_class_controller$walk()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-map"><code>crew_class_controller$map()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-pop"><code>crew_class_controller$pop()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-collect"><code>crew_class_controller$collect()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-wait"><code>crew_class_controller$wait()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-push_backlog"><code>crew_class_controller$push_backlog()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-pop_backlog"><code>crew_class_controller$pop_backlog()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-summary"><code>crew_class_controller$summary()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-cancel"><code>crew_class_controller$cancel()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-pids"><code>crew_class_controller$pids()</code></a></p></li>
<li><p><a href="#method-crew_class_controller-terminate"><code>crew_class_controller$terminate()</code></a></p></li>
</ul></div><p></p><hr><a id="method-crew_class_controller-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p><code>mirai</code> controller constructor.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/crew_class_controller.html">crew_class_controller</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  client <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  launcher <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reset_globals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reset_packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reset_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  garbage_collection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crashes_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  backup <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>client</code></dt>
<dd><p>Client object. See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>launcher</code></dt>
<dd><p>Launcher object. See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>reset_globals</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>reset_packages</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>reset_options</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>garbage_collection</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>crashes_max</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


<dt><code>backup</code></dt>
<dd><p>See <code><a href="crew_controller.html">crew_controller()</a></code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An <code>R6</code> controller object.</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CREW_EXAMPLES"</span><span class="op">)</span>, <span class="st">"true"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/crew_client.html">crew_client</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">launcher</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/crew_launcher_local.html">crew_launcher_local</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">controller</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/crew_controller.html">crew_controller</a></span><span class="op">(</span>client <span class="op">=</span> <span class="va">client</span>, launcher <span class="op">=</span> <span class="va">launcher</span><span class="op">)</span></span>
<span><span class="va">controller</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">controller</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"task"</span>, command <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">controller</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">controller</span><span class="op">$</span><span class="fu">pop</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">controller</span><span class="op">$</span><span class="fu">terminate</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-crew_class_controller-validate"></a><div class="section">
<h3 id="method-validate-">Method <code>validate()</code><a class="anchor" aria-label="anchor" href="#method-validate-"></a></h3>
<p>Validate the controller.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">validate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-size"></a><div class="section">
<h3 id="method-size-">Method <code>size()</code><a class="anchor" aria-label="anchor" href="#method-size-"></a></h3>
<p>Number of tasks in the controller.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">size</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>Non-negative integer, number of tasks in the controller.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-empty"></a><div class="section">
<h3 id="method-empty-">Method <code>empty()</code><a class="anchor" aria-label="anchor" href="#method-empty-"></a></h3>
<p>Check if the controller is empty.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">empty</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>A controller is empty if it has no <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code>
task objects in the controller.
There may still be other tasks running on the workers
of an empty controller, but those tasks were not submitted with
<code>push()</code> or <code>collect()</code>,
and they are not part of the controller task queue.</p>
</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p><code>TRUE</code> if the controller is empty, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-nonempty"></a><div class="section">
<h3 id="method-nonempty-">Method <code>nonempty()</code><a class="anchor" aria-label="anchor" href="#method-nonempty-"></a></h3>
<p>Check if the controller is nonempty.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">nonempty</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>
<p>A controller is empty if it has no <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code>
task objects in the controller.
There may still be other tasks running on the workers
of an empty controller, but those tasks were not submitted with
<code>push()</code> or <code>collect()</code>,
and they are not part of the controller task queue.</p>
</div>

<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p><code>TRUE</code> if the controller is empty, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-resolved"></a><div class="section">
<h3 id="method-resolved-">Method <code>resolved()</code><a class="anchor" aria-label="anchor" href="#method-resolved-"></a></h3>
<p>Cumulative number of resolved tasks.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">resolved</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-3">Details<a class="anchor" aria-label="anchor" href="#details-3"></a></h4>
<p><code>resolved()</code> is cumulative: it counts all the resolved
tasks over the entire lifetime of the controller session.</p>
</div>

<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>Non-negative integer of length 1,
number of resolved tasks.
The return value is 0 if the condition variable does not exist
(i.e. if the client is not running).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-unresolved"></a><div class="section">
<h3 id="method-unresolved-">Method <code>unresolved()</code><a class="anchor" aria-label="anchor" href="#method-unresolved-"></a></h3>
<p>Number of unresolved tasks.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">unresolved</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>Non-negative integer of length 1,
number of unresolved tasks.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-saturated"></a><div class="section">
<h3 id="method-saturated-">Method <code>saturated()</code><a class="anchor" aria-label="anchor" href="#method-saturated-"></a></h3>
<p>Check if the controller is saturated.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">saturated</span><span class="op">(</span></span>
<span>  collect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  controller <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>collect</code></dt>
<dd><p>Deprecated in version 0.5.0.9003 (2023-10-02). Not used.</p></dd>


<dt><code>throttle</code></dt>
<dd><p>Deprecated in version 0.5.0.9003 (2023-10-02). Not used.</p></dd>


<dt><code>controller</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-4">Details<a class="anchor" aria-label="anchor" href="#details-4"></a></h4>
<p>A controller is saturated if the number of uncollected tasks
is greater than or equal to the maximum number of workers.
You can still push tasks to a saturated controller, but
tools that use <code>crew</code> such as <code>targets</code> may choose not to
(for performance and user-friendliness).</p>
</div>

<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p><code>TRUE</code> if the controller is saturated, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-start"></a><div class="section">
<h3 id="method-start-">Method <code><a href="https://rdrr.io/r/stats/start.html" class="external-link">start()</a></code><a class="anchor" aria-label="anchor" href="#method-start-"></a></h3>
<p>Start the controller if it is not already started.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-5">Details<a class="anchor" aria-label="anchor" href="#details-5"></a></h4>
<p>Register the mirai client and register worker websockets
with the launcher.</p>
</div>

<div class="section">
<h4 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-started"></a><div class="section">
<h3 id="method-started-">Method <code>started()</code><a class="anchor" aria-label="anchor" href="#method-started-"></a></h3>
<p>Check whether the controller is started.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">started</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-6">Details<a class="anchor" aria-label="anchor" href="#details-6"></a></h4>
<p>Actually checks whether the client is started.</p>
</div>

<div class="section">
<h4 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h4>
<p><code>TRUE</code> if the controller is started, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-launch"></a><div class="section">
<h3 id="method-launch-">Method <code>launch()</code><a class="anchor" aria-label="anchor" href="#method-launch-"></a></h3>
<p>Launch one or more workers.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">launch</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1L</span>, controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>n</code></dt>
<dd><p>Number of workers to launch.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-scale"></a><div class="section">
<h3 id="method-scale-">Method <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code><a class="anchor" aria-label="anchor" href="#method-scale-"></a></h3>
<p>Auto-scale workers out to meet the demand of tasks.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">scale</span><span class="op">(</span>throttle <span class="op">=</span> <span class="cn">TRUE</span>, controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-7">Details<a class="anchor" aria-label="anchor" href="#details-7"></a></h4>
<p>The <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> method launches new workers to
run tasks if needed.</p>
</div>

<div class="section">
<h4 id="returns-11">Returns<a class="anchor" aria-label="anchor" href="#returns-11"></a></h4>
<p>Invisibly returns <code>TRUE</code> if there was any relevant
auto-scaling activity (new worker launches or worker
connection/disconnection events) (<code>FALSE</code> otherwise).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-autoscale"></a><div class="section">
<h3 id="method-autoscale-">Method <code>autoscale()</code><a class="anchor" aria-label="anchor" href="#method-autoscale-"></a></h3>
<p>Run worker auto-scaling in a <code>later</code> loop
every <code>controller$client$seconds_interval</code> seconds.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">autoscale</span><span class="op">(</span></span>
<span>  loop <span class="op">=</span> <span class="fu">later</span><span class="fu">::</span><span class="fu"><a href="https://later.r-lib.org/reference/create_loop.html" class="external-link">current_loop</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  controllers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>loop</code></dt>
<dd><p>A <code>later</code> loop to run auto-scaling.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-8">Details<a class="anchor" aria-label="anchor" href="#details-8"></a></h4>
<p>Call <code>controller$descale()</code> to terminate the
auto-scaling loop.</p>
</div>

<div class="section">
<h4 id="returns-12">Returns<a class="anchor" aria-label="anchor" href="#returns-12"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-descale"></a><div class="section">
<h3 id="method-descale-">Method <code>descale()</code><a class="anchor" aria-label="anchor" href="#method-descale-"></a></h3>
<p>Terminate the auto-scaling loop started by
<code>controller$autoscale()</code>.</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">descale</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-13">Returns<a class="anchor" aria-label="anchor" href="#returns-13"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-crashes"></a><div class="section">
<h3 id="method-crashes-">Method <code>crashes()</code><a class="anchor" aria-label="anchor" href="#method-crashes-"></a></h3>
<p>Report the number of consecutive crashes of a task.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">crashes</span><span class="op">(</span><span class="va">name</span>, controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>Character string, name of the task to check.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-9">Details<a class="anchor" aria-label="anchor" href="#details-9"></a></h4>
<p>See the <code>crashes_max</code> argument of <code><a href="crew_controller.html">crew_controller()</a></code>.</p>
</div>

<div class="section">
<h4 id="returns-14">Returns<a class="anchor" aria-label="anchor" href="#returns-14"></a></h4>
<p>Non-negative integer, number of consecutive times the task
crashed.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-push"></a><div class="section">
<h3 id="method-push-">Method <code>push()</code><a class="anchor" aria-label="anchor" href="#method-push-"></a></h3>
<p>Push a task to the head of the task list.</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span></span>
<span>  <span class="va">command</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  substitute <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  library <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seconds_timeout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_command <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  controller <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>command</code></dt>
<dd><p>Language object with R code to run.</p></dd>


<dt><code>data</code></dt>
<dd><p>Named list of local data objects in the
evaluation environment.</p></dd>


<dt><code>globals</code></dt>
<dd><p>Named list of objects to temporarily assign to the
global environment for the task.
This list should
include any functions you previously defined in the global
environment which are required to run tasks.
See the <code>reset_globals</code> argument
of <code><a href="crew_controller_local.html">crew_controller_local()</a></code>.</p></dd>


<dt><code>substitute</code></dt>
<dd><p>Logical of length 1, whether to call
<code><a href="https://rdrr.io/r/base/substitute.html" class="external-link">base::substitute()</a></code> on the supplied value of the
<code>command</code> argument. If <code>TRUE</code> (default) then <code>command</code> is quoted
literally as you write it, e.g.
<code>push(command = your_function_call())</code>. If <code>FALSE</code>, then <code>crew</code>
assumes <code>command</code> is a language object and you are passing its
value, e.g. <code>push(command = quote(your_function_call()))</code>.
<code>substitute = TRUE</code> is appropriate for interactive use,
whereas <code>substitute = FALSE</code> is meant for automated R programs
that invoke <code>crew</code> controllers.</p></dd>


<dt><code>seed</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number generator
seed to set for the evaluation of the task. Passed to the
<code>seed</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>algorithm</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number
generator algorithm to set for the evaluation of the task.
Passed to the <code>kind</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">RNGkind()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
recommended widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>packages</code></dt>
<dd><p>Character vector of packages to load for the task.</p></dd>


<dt><code>library</code></dt>
<dd><p>Library path to load the packages. See the <code>lib.loc</code>
argument of <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>.</p></dd>


<dt><code>seconds_timeout</code></dt>
<dd><p>Optional task timeout passed to the <code>.timeout</code>
argument of <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code> (after converting to milliseconds).</p></dd>


<dt><code>scale</code></dt>
<dd><p>Logical, whether to automatically call <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code>
to auto-scale workers to meet the demand of the task load. Also
see the <code>throttle</code> argument.</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>name</code></dt>
<dd><p>Character string, name of the task. If <code>NULL</code>, then
a random name is generated automatically.
The name of the task must not conflict with the name of another
task pushed to the controller. Any previous task with the same name
must first be popped before a new task with that name can be pushed.</p></dd>


<dt><code>save_command</code></dt>
<dd><p>Deprecated on 2025-01-22 (<code>crew</code> version
0.10.2.9004) and no longer used.</p></dd>


<dt><code>controller</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-15">Returns<a class="anchor" aria-label="anchor" href="#returns-15"></a></h4>
<p>Invisibly return the <code>mirai</code> object of the pushed task.
This allows you to interact with the task directly, e.g.
to create a promise object with <code><a href="https://rstudio.github.io/promises/reference/is.promise.html" class="external-link">promises::as.promise()</a></code>.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-walk"></a><div class="section">
<h3 id="method-walk-">Method <code>walk()</code><a class="anchor" aria-label="anchor" href="#method-walk-"></a></h3>
<p>Apply a single command to multiple inputs,
and return control to the user without
waiting for any task to complete.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">walk</span><span class="op">(</span></span>
<span>  <span class="va">command</span>,</span>
<span>  <span class="va">iterate</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  substitute <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  library <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seconds_timeout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_command <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  controller <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>command</code></dt>
<dd><p>Language object with R code to run.</p></dd>


<dt><code>iterate</code></dt>
<dd><p>Named list of vectors or lists to iterate over.
For example, to run function calls
<code>f(x = 1, y = "a")</code> and <code>f(x = 2, y = "b")</code>,
set <code>command</code> to <code>f(x, y)</code>, and set <code>iterate</code> to
<code>list(x = c(1, 2), y = c("a", "b"))</code>. The individual
function calls are evaluated as
<code>f(x = iterate$x[[1]], y = iterate$y[[1]])</code> and
<code>f(x = iterate$x[[2]], y = iterate$y[[2]])</code>.
All the elements of <code>iterate</code> must have the same length.
If there are any name conflicts between <code>iterate</code> and <code>data</code>,
<code>iterate</code> takes precedence.</p></dd>


<dt><code>data</code></dt>
<dd><p>Named list of constant local data objects in the
evaluation environment. Objects in this list are treated as single
values and are held constant for each iteration of the map.</p></dd>


<dt><code>globals</code></dt>
<dd><p>Named list of constant objects to temporarily
assign to the global environment for each task. This list should
include any functions you previously defined in the global
environment which are required to run tasks.
See the <code>reset_globals</code> argument of <code><a href="crew_controller_local.html">crew_controller_local()</a></code>.
Objects in this list are treated as single
values and are held constant for each iteration of the map.</p></dd>


<dt><code>substitute</code></dt>
<dd><p>Logical of length 1, whether to call
<code><a href="https://rdrr.io/r/base/substitute.html" class="external-link">base::substitute()</a></code> on the supplied value of the
<code>command</code> argument. If <code>TRUE</code> (default) then <code>command</code> is quoted
literally as you write it, e.g.
<code>push(command = your_function_call())</code>. If <code>FALSE</code>, then <code>crew</code>
assumes <code>command</code> is a language object and you are passing its
value, e.g. <code>push(command = quote(your_function_call()))</code>.
<code>substitute = TRUE</code> is appropriate for interactive use,
whereas <code>substitute = FALSE</code> is meant for automated R programs
that invoke <code>crew</code> controllers.</p></dd>


<dt><code>seed</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number generator
seed to set for the evaluation of the task. Passed to the
<code>seed</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
recommended widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>algorithm</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number
generator algorithm to set for the evaluation of the task.
Passed to the <code>kind</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">RNGkind()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
recommended widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>packages</code></dt>
<dd><p>Character vector of packages to load for the task.</p></dd>


<dt><code>library</code></dt>
<dd><p>Library path to load the packages. See the <code>lib.loc</code>
argument of <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>.</p></dd>


<dt><code>seconds_timeout</code></dt>
<dd><p>Optional task timeout passed to the <code>.timeout</code>
argument of <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code> (after converting to milliseconds).</p></dd>


<dt><code>names</code></dt>
<dd><p>Optional character of length 1, name of the element of
<code>iterate</code> with names for the tasks. If <code>names</code> is supplied,
then <code>iterate[[names]]</code> must be a character vector.</p></dd>


<dt><code>save_command</code></dt>
<dd><p>Deprecated on 2025-01-22 (<code>crew</code> version
0.10.2.9004). The command is always saved now.</p></dd>


<dt><code>verbose</code></dt>
<dd><p>Logical of length 1, whether to print to a progress bar
when pushing tasks.</p></dd>


<dt><code>scale</code></dt>
<dd><p>Logical, whether to automatically scale workers to meet
demand. See also the <code>throttle</code> argument.</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>controller</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-10">Details<a class="anchor" aria-label="anchor" href="#details-10"></a></h4>
<p>In contrast to <code>walk()</code>, <code>map()</code> blocks the local R session
and waits for all tasks to complete.</p>
</div>

<div class="section">
<h4 id="returns-16">Returns<a class="anchor" aria-label="anchor" href="#returns-16"></a></h4>
<p>Invisibly returns a list of <code>mirai</code> task objects for the
newly created tasks. The order of tasks in the list matches the
order of data in the <code>iterate</code> argument.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-map"></a><div class="section">
<h3 id="method-map-">Method <code>map()</code><a class="anchor" aria-label="anchor" href="#method-map-"></a></h3>
<p>Apply a single command to multiple inputs,
wait for all tasks to complete,
and return the results of all tasks.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">map</span><span class="op">(</span></span>
<span>  <span class="va">command</span>,</span>
<span>  <span class="va">iterate</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  globals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  substitute <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  library <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seconds_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seconds_timeout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_command <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  error <span class="op">=</span> <span class="st">"stop"</span>,</span>
<span>  warnings <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  controller <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>command</code></dt>
<dd><p>Language object with R code to run.</p></dd>


<dt><code>iterate</code></dt>
<dd><p>Named list of vectors or lists to iterate over.
For example, to run function calls
<code>f(x = 1, y = "a")</code> and <code>f(x = 2, y = "b")</code>,
set <code>command</code> to <code>f(x, y)</code>, and set <code>iterate</code> to
<code>list(x = c(1, 2), y = c("a", "b"))</code>. The individual
function calls are evaluated as
<code>f(x = iterate$x[[1]], y = iterate$y[[1]])</code> and
<code>f(x = iterate$x[[2]], y = iterate$y[[2]])</code>.
All the elements of <code>iterate</code> must have the same length.
If there are any name conflicts between <code>iterate</code> and <code>data</code>,
<code>iterate</code> takes precedence.</p></dd>


<dt><code>data</code></dt>
<dd><p>Named list of constant local data objects in the
evaluation environment. Objects in this list are treated as single
values and are held constant for each iteration of the map.</p></dd>


<dt><code>globals</code></dt>
<dd><p>Named list of constant objects to temporarily
assign to the global environment for each task. This list should
include any functions you previously defined in the global
environment which are required to run tasks.
See the <code>reset_globals</code> argument of <code><a href="crew_controller_local.html">crew_controller_local()</a></code>.
Objects in this list are treated as single
values and are held constant for each iteration of the map.</p></dd>


<dt><code>substitute</code></dt>
<dd><p>Logical of length 1, whether to call
<code><a href="https://rdrr.io/r/base/substitute.html" class="external-link">base::substitute()</a></code> on the supplied value of the
<code>command</code> argument. If <code>TRUE</code> (default) then <code>command</code> is quoted
literally as you write it, e.g.
<code>push(command = your_function_call())</code>. If <code>FALSE</code>, then <code>crew</code>
assumes <code>command</code> is a language object and you are passing its
value, e.g. <code>push(command = quote(your_function_call()))</code>.
<code>substitute = TRUE</code> is appropriate for interactive use,
whereas <code>substitute = FALSE</code> is meant for automated R programs
that invoke <code>crew</code> controllers.</p></dd>


<dt><code>seed</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number generator
seed to set for the evaluation of the task. Passed to the
<code>seed</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
recommended widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>algorithm</code></dt>
<dd><p>Integer of length 1 with the pseudo-random number
generator algorithm to set for the evaluation of the task.
Passed to the <code>kind</code> argument of <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">RNGkind()</a></code> if not <code>NULL</code>.
If <code>algorithm</code> and <code>seed</code> are both <code>NULL</code>,
then the random number generator defaults to the
recommended widely spaced worker-specific
L'Ecuyer streams as supported by <code><a href="https://mirai.r-lib.org/reference/nextstream.html" class="external-link">mirai::nextstream()</a></code>.
See <code><a href="https://cran.rstudio.com/web/packages/parallel/vignettes/parallel.pdf" class="external-link">vignette("parallel", package = "parallel")</a></code> for details.</p></dd>


<dt><code>packages</code></dt>
<dd><p>Character vector of packages to load for the task.</p></dd>


<dt><code>library</code></dt>
<dd><p>Library path to load the packages. See the <code>lib.loc</code>
argument of <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>.</p></dd>


<dt><code>seconds_interval</code></dt>
<dd><p>Deprecated on 2025-01-17 (<code>crew</code> version
0.10.2.9003). Instead, the <code>seconds_interval</code> argument passed
to <code><a href="crew_controller_group.html">crew_controller_group()</a></code> is used as <code>seconds_max</code>
in a <code><a href="crew_throttle.html">crew_throttle()</a></code> object which orchestrates exponential
backoff.</p></dd>


<dt><code>seconds_timeout</code></dt>
<dd><p>Optional task timeout passed to the <code>.timeout</code>
argument of <code><a href="https://mirai.r-lib.org/reference/mirai.html" class="external-link">mirai::mirai()</a></code> (after converting to milliseconds).</p></dd>


<dt><code>names</code></dt>
<dd><p>Optional character string, name of the element of
<code>iterate</code> with names for the tasks. If <code>names</code> is supplied,
then <code>iterate[[names]]</code> must be a character vector.</p></dd>


<dt><code>save_command</code></dt>
<dd><p>Deprecated on 2025-01-22 (<code>crew</code> version
0.10.2.9004). The command is always saved now.</p></dd>


<dt><code>error</code></dt>
<dd><p>Character of length 1, choice of action if
a task was not successful. Possible values:</p><ul><li><p><code>"stop"</code>: throw an error in the main R session instead of returning
a value. In case of an error, the results from the last errored
<code>map()</code> are in the <code>error</code> field
of the controller, e.g. <code>controller_object$error</code>. To reduce
memory consumption, set <code>controller_object$error &lt;- NULL</code> after
you are finished troubleshooting.</p></li>
<li><p><code>"warn"</code>: throw a warning. This allows the return value with
all the error messages and tracebacks to be generated.</p></li>
<li><p><code>"silent"</code>: do nothing special.
NOTE: the only kinds of errors considered here are errors at the R
level. A crashed tasks will return a status of <code>"crash"</code> in the output
and not trigger an error in <code>map()</code> unless <code>crashes_max</code> is reached.</p></li>
</ul></dd>


<dt><code>warnings</code></dt>
<dd><p>Logical of length 1, whether to throw a warning in the
interactive session if at least one task encounters an error.</p></dd>


<dt><code>verbose</code></dt>
<dd><p>Logical of length 1, whether to print to a progress bar
as tasks resolve.</p></dd>


<dt><code>scale</code></dt>
<dd><p>Logical, whether to automatically scale workers to meet
demand. See also the <code>throttle</code> argument.</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>controller</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-11">Details<a class="anchor" aria-label="anchor" href="#details-11"></a></h4>
<p><code>map()</code> cannot be used unless all prior tasks are
completed and popped. You may need to wait and then pop them
manually. Alternatively, you can start over: either call
<code>terminate()</code> on the current controller object to reset it, or
create a new controller object entirely.</p>
</div>

<div class="section">
<h4 id="returns-17">Returns<a class="anchor" aria-label="anchor" href="#returns-17"></a></h4>
<p>A <code>tibble</code> of results and metadata: one row per task
and columns corresponding to the output of <code>pop()</code>.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-pop"></a><div class="section">
<h3 id="method-pop-">Method <code>pop()</code><a class="anchor" aria-label="anchor" href="#method-pop-"></a></h3>
<p>Pop a completed task from the results data frame.</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">pop</span><span class="op">(</span></span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  collect <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  error <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  controllers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>scale</code></dt>
<dd><p>Logical of length 1,
whether to automatically call <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code>
to auto-scale workers to meet the demand of the task load.
Scaling up on <code>pop()</code> may be important
for transient or nearly transient workers that tend to drop off
quickly after doing little work.
See also the <code>throttle</code> argument.</p></dd>


<dt><code>collect</code></dt>
<dd><p>Deprecated in version 0.5.0.9003 (2023-10-02).</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>error</code></dt>
<dd><p><code>NULL</code> or character of length 1, choice of action if
the popped task threw an error. Possible values:</p><ul><li><p><code>"stop"</code>: throw an error in the main R session instead of returning
a value.</p></li>
<li><p><code>"warn"</code>: throw a warning.</p></li>
<li><p><code>NULL</code> or <code>"silent"</code>: do not react to errors.
NOTE: the only kinds of errors considered here are errors at the R
level. A crashed tasks will return a status of <code>"crash"</code> in the output
and not trigger an error in <code>pop()</code> unless <code>crashes_max</code> is reached.</p></li>
</ul></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-12">Details<a class="anchor" aria-label="anchor" href="#details-12"></a></h4>
<p>If not task is currently completed, <code>pop()</code>
will attempt to auto-scale workers as needed.</p>
</div>

<div class="section">
<h4 id="returns-18">Returns<a class="anchor" aria-label="anchor" href="#returns-18"></a></h4>
<p>If there is no task to collect, return <code>NULL</code>. Otherwise,
return a one-row <code>tibble</code> with the following columns.</p><ul><li><p><code>name</code>: the task name.</p></li>
<li><p><code>command</code>: a character string with the R command.</p></li>
<li><p><code>result</code>: a list containing the return value of the R command.
<code>NA</code> if the task failed.</p></li>
<li><p><code>status</code>: a character string. <code>"success"</code> if the task succeeded,
<code>"cancel"</code> if the task was canceled with
the <code>cancel()</code> controller method,
<code>"crash"</code> if the worker running the task exited before
it could complete the task, or <code>"error"</code>
for any other kind of error.</p></li>
<li><p><code>error</code>: the first 2048 characters of the error message if
the task status is not <code>"success"</code>, <code>NA</code> otherwise.
Messages for crashes and cancellations are captured here
alongside ordinary R-level errors.</p></li>
<li><p><code>code</code>: an integer code denoting the specific exit status:
<code>0</code> for successful tasks, <code>-1</code> for tasks with an error in the R
command of the task, and another positive integer with an NNG
status code if there is an error at the NNG/<code>nanonext</code> level.
<code><a href="https://nanonext.r-lib.org/reference/nng_error.html" class="external-link">nanonext::nng_error()</a></code> can interpret these codes.</p></li>
<li><p><code>trace</code>: the first 2048 characters of the text of the traceback
if the task threw an error, <code>NA</code> otherwise.</p></li>
<li><p><code>warnings</code>: the first 2048 characters. of the text of
warning messages that the task may have generated, <code>NA</code> otherwise.</p></li>
<li><p><code>seconds</code>: number of seconds that the task ran.</p></li>
<li><p><code>seed</code>: the single integer originally supplied to <code>push()</code>,
<code>NA</code> otherwise. The pseudo-random number generator state
just prior to the task can be restored using
<code>set.seed(seed = seed, kind = algorithm)</code>, where <code>seed</code> and
<code>algorithm</code> are part of this output.</p></li>
<li><p><code>algorithm</code>: name of the pseudo-random number generator algorithm
originally supplied to <code>push()</code>,
<code>NA</code> otherwise. The pseudo-random number generator state
just prior to the task can be restored using
<code>set.seed(seed = seed, kind = algorithm)</code>, where <code>seed</code> and
<code>algorithm</code> are part of this output.</p></li>
<li><p><code>controller</code>: name of the <code>crew</code> controller where the task ran.</p></li>
<li><p><code>worker</code>: name of the <code>crew</code> worker that ran the task.</p></li>
</ul></div>

</div><p></p><hr><a id="method-crew_class_controller-collect"></a><div class="section">
<h3 id="method-collect-">Method <code>collect()</code><a class="anchor" aria-label="anchor" href="#method-collect-"></a></h3>
<p>Pop all available task results and return them in a tidy
<code>tibble</code>.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">collect</span><span class="op">(</span></span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  error <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  controllers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>scale</code></dt>
<dd><p>Logical of length 1,
whether to automatically call <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code>
to auto-scale workers to meet the demand of the task load.</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>error</code></dt>
<dd><p><code>NULL</code> or character of length 1, choice of action if
the popped task threw an error. Possible values:
* <code>"stop"</code>: throw an error in the main R session instead of
returning a value.
* <code>"warn"</code>: throw a warning.
* <code>NULL</code> or <code>"silent"</code>: do not react to errors.
NOTE: the only kinds of errors considered here are errors at the R
level. A crashed tasks will return a status of <code>"crash"</code> in the output
and not trigger an error in <code>collect()</code>
unless <code>crashes_max</code> is reached.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-19">Returns<a class="anchor" aria-label="anchor" href="#returns-19"></a></h4>
<p>A <code>tibble</code> of results and metadata of all resolved tasks,
with one row per task. Returns <code>NULL</code> if there are no tasks
to collect. See <code>pop()</code> for details on the columns of the
returned <code>tibble</code>.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-wait"></a><div class="section">
<h3 id="method-wait-">Method <code>wait()</code><a class="anchor" aria-label="anchor" href="#method-wait-"></a></h3>
<p>Wait for tasks.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span></span>
<span>  mode <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  seconds_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seconds_timeout <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  throttle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  controllers <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>mode</code></dt>
<dd><p>Character string, name of the waiting condition.
<code>wait(mode = "all")</code> waits until all tasks in the <code>mirai</code>
compute profile resolve, and
<code>wait(mode = "one")</code> waits until at least one task is available
to <code>push()</code> or <code>collect()</code> from the controller.
The former still works if the controller is not the only
means of submitting tasks to the compute profile,
whereas the latter assumes only the controller submits tasks.</p></dd>


<dt><code>seconds_interval</code></dt>
<dd><p>Deprecated on 2025-01-17 (<code>crew</code> version
0.10.2.9003). Instead, the <code>seconds_interval</code> argument passed
to <code><a href="crew_controller_group.html">crew_controller_group()</a></code> is used as <code>seconds_max</code>
in a <code><a href="crew_throttle.html">crew_throttle()</a></code> object which orchestrates exponential
backoff.</p></dd>


<dt><code>seconds_timeout</code></dt>
<dd><p>Timeout length in seconds waiting for tasks.</p></dd>


<dt><code>scale</code></dt>
<dd><p>Logical, whether to automatically call <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code>
to auto-scale workers to meet the demand of the task load.
See also the <code>throttle</code> argument.</p></dd>


<dt><code>throttle</code></dt>
<dd><p><code>TRUE</code> to skip auto-scaling if it already happened
within the last <code>seconds_interval</code> seconds. <code>FALSE</code> to auto-scale
every time <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> is called. Throttling avoids
overburdening the <code>mirai</code> dispatcher and other resources.</p></dd>


<dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-13">Details<a class="anchor" aria-label="anchor" href="#details-13"></a></h4>
<p>The <code>wait()</code> method blocks the calling R session
until the condition in the <code>mode</code> argument is met.
During the wait, <code>wait()</code> iteratively auto-scales the workers.</p>
</div>

<div class="section">
<h4 id="returns-20">Returns<a class="anchor" aria-label="anchor" href="#returns-20"></a></h4>
<p>A logical of length 1, invisibly.
<code>wait(mode = "all")</code> returns <code>TRUE</code> if all tasks in the <code>mirai</code>
compute profile have resolved (<code>FALSE</code> otherwise).
<code>wait(mode = "one")</code> returns <code>TRUE</code> if the controller is ready
to pop or collect at least one resolved task (<code>FALSE</code> otherwise).
<code>wait(mode = "one")</code> assumes all
tasks were submitted through the controller and not by other means.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-push_backlog"></a><div class="section">
<h3 id="method-push-backlog-">Method <code>push_backlog()</code><a class="anchor" aria-label="anchor" href="#method-push-backlog-"></a></h3>
<p>Push the name of a task to the backlog.</p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">push_backlog</span><span class="op">(</span><span class="va">name</span>, controller <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-20">Arguments<a class="anchor" aria-label="anchor" href="#arguments-20"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>Character of length 1 with the task name to push to
the backlog.</p></dd>


<dt><code>controller</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-14">Details<a class="anchor" aria-label="anchor" href="#details-14"></a></h4>
<p><code>pop_backlog()</code> pops the tasks that can be pushed
without saturating the controller.</p>
</div>

<div class="section">
<h4 id="returns-21">Returns<a class="anchor" aria-label="anchor" href="#returns-21"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-pop_backlog"></a><div class="section">
<h3 id="method-pop-backlog-">Method <code>pop_backlog()</code><a class="anchor" aria-label="anchor" href="#method-pop-backlog-"></a></h3>
<p>Pop the task names from the head of the backlog which
can be pushed without saturating the controller.</p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">pop_backlog</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-21">Arguments<a class="anchor" aria-label="anchor" href="#arguments-21"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-22">Returns<a class="anchor" aria-label="anchor" href="#returns-22"></a></h4>
<p>Character vector of task names which can be pushed to the
controller without saturating it. If the controller is saturated,
<code>character(0L)</code> is returned.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-summary"></a><div class="section">
<h3 id="method-summary-">Method <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code><a class="anchor" aria-label="anchor" href="#method-summary-"></a></h3>
<p>Summarize the collected tasks of the controller.</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-22">Arguments<a class="anchor" aria-label="anchor" href="#arguments-22"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-23">Returns<a class="anchor" aria-label="anchor" href="#returns-23"></a></h4>
<p>A data frame of cumulative summary statistics on the tasks
collected through <code>pop()</code> and <code>collect()</code>.
It has one row and the following columns:</p><ul><li><p><code>controller</code>: name of the controller.</p></li>
<li><p><code>seconds</code>: total number of runtime in seconds.</p></li>
<li><p><code>tasks</code>: total number of tasks collected.</p></li>
<li><p><code>success</code>: total number of collected tasks that did not crash
or error.</p></li>
<li><p><code>error</code>: total number of tasks with errors, either in the R code
of the task or an NNG-level error that is not a cancellation
or crash.</p></li>
<li><p><code>crash</code>: total number of crashed tasks (where the worker exited
unexpectedly while it was running the task).</p></li>
<li><p><code>cancel</code>: total number of tasks interrupted with the <code>cancel()</code>
controller method.</p></li>
<li><p><code>warning</code>: total number of tasks with one or more warnings.</p></li>
</ul></div>

</div><p></p><hr><a id="method-crew_class_controller-cancel"></a><div class="section">
<h3 id="method-cancel-">Method <code>cancel()</code><a class="anchor" aria-label="anchor" href="#method-cancel-"></a></h3>
<p>Cancel one or more tasks.</p><div class="section">
<h4 id="usage-24">Usage<a class="anchor" aria-label="anchor" href="#usage-24"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">cancel</span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0L</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-23">Arguments<a class="anchor" aria-label="anchor" href="#arguments-23"></a></h4>
<p></p><div class="arguments"><dl><dt><code>names</code></dt>
<dd><p>Character vector of names of tasks to cancel.
Those names must have been manually supplied by <code>push()</code>.</p></dd>


<dt><code>all</code></dt>
<dd><p><code>TRUE</code> to cancel all tasks, <code>FALSE</code> otherwise.
<code>all = TRUE</code> supersedes the <code>names</code> argument.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-24">Returns<a class="anchor" aria-label="anchor" href="#returns-24"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-pids"></a><div class="section">
<h3 id="method-pids-">Method <code>pids()</code><a class="anchor" aria-label="anchor" href="#method-pids-"></a></h3>
<p>Deprecated on 2025-08-26 in <code>crew</code> version 1.2.1.9005.</p><div class="section">
<h4 id="usage-25">Usage<a class="anchor" aria-label="anchor" href="#usage-25"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">pids</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-24">Arguments<a class="anchor" aria-label="anchor" href="#arguments-24"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-25">Returns<a class="anchor" aria-label="anchor" href="#returns-25"></a></h4>
<p>The integer process ID of the current process.</p>
</div>

</div><p></p><hr><a id="method-crew_class_controller-terminate"></a><div class="section">
<h3 id="method-terminate-">Method <code>terminate()</code><a class="anchor" aria-label="anchor" href="#method-terminate-"></a></h3>
<p>Terminate the workers and the <code>mirai</code> client.</p><div class="section">
<h4 id="usage-26">Usage<a class="anchor" aria-label="anchor" href="#usage-26"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">crew_class_controller</span><span class="op">$</span><span class="fu">terminate</span><span class="op">(</span>controllers <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-25">Arguments<a class="anchor" aria-label="anchor" href="#arguments-25"></a></h4>
<p></p><div class="arguments"><dl><dt><code>controllers</code></dt>
<dd><p>Not used. Included to ensure the signature is
compatible with the analogous method of controller groups.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-26">Returns<a class="anchor" aria-label="anchor" href="#returns-26"></a></h4>
<p><code>NULL</code> (invisibly).</p>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CREW_EXAMPLES"</span><span class="op">)</span>, <span class="st">"true"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_client.html">crew_client</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">launcher</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_launcher_local.html">crew_launcher_local</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_controller.html">crew_controller</a></span><span class="op">(</span>client <span class="op">=</span> <span class="va">client</span>, launcher <span class="op">=</span> <span class="va">launcher</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"task"</span>, command <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">pop</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">terminate</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `crew_class_controller$new`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CREW_EXAMPLES"</span><span class="op">)</span>, <span class="st">"true"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_client.html">crew_client</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">launcher</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_launcher_local.html">crew_launcher_local</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span> <span class="op">&lt;-</span> <span class="fu"><a href="crew_controller.html">crew_controller</a></span><span class="op">(</span>client <span class="op">=</span> <span class="va">client</span>, launcher <span class="op">=</span> <span class="va">launcher</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">push</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"task"</span>, command <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">wait</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">pop</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">controller</span><span class="op">$</span><span class="fu">terminate</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by William Michael Landau, Eli Lilly and Company.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

